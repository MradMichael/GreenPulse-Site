/* ==== Base & Fonts ==== */
html, body { height: 100%; }
body{
  box-sizing:border-box;margin:0;padding:0;
  font-family:'Exo 2',sans-serif;
  background:radial-gradient(ellipse at center,#0f1419 0%,#000 70%);
  color:#fff; overflow:hidden; position:relative;
  /* allow map gestures on mobile */
  touch-action: pan-x pan-y;
}

/* ==== Starfield ==== */
.starfield{
  position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;
  background:
    radial-gradient(2px 2px at 20px 30px,#eee,transparent),
    radial-gradient(2px 2px at 40px 70px,rgba(255,255,255,.8),transparent),
    radial-gradient(1px 1px at 90px 40px,#fff,transparent),
    radial-gradient(1px 1px at 130px 80px,rgba(255,255,255,.6),transparent),
    radial-gradient(2px 2px at 160px 30px,#ddd,transparent);
  background-repeat:repeat;background-size:200px 100px;animation:sparkle 20s linear infinite;
}
@keyframes sparkle{from{transform:translateY(0)}to{transform:translateY(-100px)}}

/* ==== Particles ==== */
.particles{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:-2}
.particle{position:absolute;width:4px;height:4px;background:#0f0;border-radius:50%;box-shadow:0 0 10px #0f0;animation:float 15s infinite linear}
.particle:nth-child(2n){background:#0ff;box-shadow:0 0 10px #0ff;animation-duration:12s}
.particle:nth-child(3n){background:#fff;box-shadow:0 0 8px #fff;animation-duration:18s;width:2px;height:2px}
@keyframes float{
  0%{transform:translateY(100vh) translateX(0) rotate(0);opacity:0}
  10%{opacity:1}
  90%{opacity:1}
  100%{transform:translateY(-10vh) translateX(100px) rotate(360deg);opacity:0}
}

/* ==== Layout & Containers ==== */
.container{
  display:flex; height:100dvh; /* dynamic viewport height for mobile */
  position:relative;
  background:linear-gradient(45deg,rgba(0,100,200,.1),rgba(0,50,150,.1));
}

.map-container{
  flex:1; position:relative; overflow:hidden;
  background:radial-gradient(circle at center,#001122 0%,#000 100%);
  border:2px solid #90ff90;border-radius:15px;margin:10px;
  box-shadow:0 0 30px rgba(144,255,144,.3), inset 0 0 30px rgba(0,100,50,.1);
  min-height:300px; /* safety floor on tiny screens */
}

/* The Leaflet map itself */
#map{width:100%;height:100%;border-radius:15px}

/* ==== Leaflet z-index sanity so your overlays and controls co-exist ==== */
.leaflet-container{ background:transparent; outline:none !important; }
.zone-overlay{ z-index:400; }                    /* tiles ~200 */
.leaflet-top, .leaflet-bottom{ z-index:650; }    /* controls over zones */
.leaflet-pane.leaflet-popup-pane{ z-index:700; } /* popups on top */

/* ==== Zone overlays ==== */
.zone-overlay{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}
.zone{
  position:absolute;border-radius:50%;cursor:pointer;pointer-events:all;
  transition:all .3s;border:2px solid rgba(255,255,255,.8);
  backdrop-filter:blur(2px);animation:pulse 2s infinite;
  display:flex;align-items:center;justify-content:center;
  font-size:24px;color:#fff;text-shadow:0 0 10px rgba(0,0,0,.8)
}
@keyframes pulse{
  0%,100%{transform:scale(1);box-shadow:0 0 10px rgba(255,255,255,.3)}
  50%{transform:scale(1.1);box-shadow:0 0 20px rgba(255,255,255,.6)}
}
.zone:hover{transform:scale(1.2)!important;box-shadow:0 0 30px rgba(0,255,255,.8)!important;border-color:#0ff}
.zone.danger{background:radial-gradient(circle,rgba(255,0,0,.8) 0%,rgba(255,100,100,.4) 100%);box-shadow:0 0 15px rgba(255,0,0,.6);border-color:rgba(255,100,100,.9)}
.zone.moderate{background:radial-gradient(circle,rgba(255,165,0,.8) 0%,rgba(255,200,100,.4) 100%);box-shadow:0 0 15px rgba(255,165,0,.6);border-color:rgba(255,200,100,.9)}
.zone.healthy{background:radial-gradient(circle,rgba(0,255,0,.8) 0%,rgba(100,255,100,.4) 100%);box-shadow:0 0 15px rgba(0,255,0,.6);border-color:rgba(100,255,100,.9)}
.zone::after{
  content:'';position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;border-radius:50%;
  background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,.1) 50%,transparent 70%);
  animation:hologram 4s linear infinite
}
@keyframes hologram{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}

/* ==== Title ==== */
.simple-title{
  position:absolute;top:20px;left:20px;
  font-family:'Orbitron',monospace;font-size:24px;font-weight:900;color:#90ff90;
  text-shadow:0 0 10px rgba(144,255,144,.5);letter-spacing:3px;z-index:150;
  background:rgba(20,40,20,.8);padding:10px 20px;border-radius:10px;
  border:1px solid #90ff90;box-shadow:0 0 20px rgba(144,255,144,.3);backdrop-filter:blur(10px)
}

/* ==== Controls ==== */
.controls{
  position:absolute;top:80px;left:20px;
  background:linear-gradient(135deg,rgba(0,40,20,.95),rgba(0,100,50,.9));
  padding:15px;border-radius:10px;border:1px solid #90ff90;
  box-shadow:0 0 20px rgba(144,255,144,.3), inset 0 0 20px rgba(0,100,50,.1);
  z-index:100;backdrop-filter:blur(10px);width:200px
}
.controls h3{
  font-family:'Orbitron',monospace;color:#90ff90;margin:0 0 10px;
  font-size:12px;text-transform:uppercase;letter-spacing:1px;text-shadow:0 0 5px rgba(144,255,144,.5)
}
.time-slider{
  width:160px;margin:10px 0;background:linear-gradient(90deg,#f00 0%,#ff0 50%,#0f0 100%);
  height:6px;border-radius:3px;outline:none;-webkit-appearance:none
}
.time-slider::-webkit-slider-thumb{
  -webkit-appearance:none;appearance:none;width:20px;height:20px;border-radius:50%;
  background:#90ff90;cursor:pointer;box-shadow:0 0 10px rgba(144,255,144,.8)
}
.year-display{font-family:'Orbitron',monospace;font-size:14px;color:#90ff90;text-shadow:0 0 5px rgba(0,255,0,.5);margin-top:8px}

/* ==== Zoom Buttons (custom, not Leaflet's) ==== */
.zoom-controls{position:absolute;top:80px;right:20px;display:flex;flex-direction:column;gap:10px;z-index:660}
.zoom-btn{
  width:50px;height:50px;background:linear-gradient(135deg,rgba(0,100,50,.8),rgba(0,150,75,.6));
  border:2px solid #90ff90;border-radius:50%;font-family:'Orbitron',monospace;
  font-size:20px;font-weight:bold;color:#fff;cursor:pointer;transition:all .3s;
  box-shadow:0 0 15px rgba(144,255,144,.3)
}
.zoom-btn:hover{background:linear-gradient(135deg,rgba(0,150,75,.9),rgba(0,200,100,.7));box-shadow:0 0 25px rgba(144,255,144,.6);transform:scale(1.1)}

/* If you enable Leaflet's default zoom control later, keep it readable */
.leaflet-control-zoom a{
  box-shadow:0 0 10px rgba(0,0,0,.4);
  border-radius:8px;
}

/* ==== Sidebar ==== */
.sidebar{
  width:280px;background:linear-gradient(180deg,rgba(0,30,10,.95),rgba(0,60,30,.9));
  backdrop-filter:blur(15px);padding:20px;box-shadow:-5px 0 30px rgba(144,255,144,.2);
  overflow-y:auto;transform:translateX(100%);transition:transform .4s;
  border-left:2px solid #90ff90;position:relative
}
.sidebar.active{transform:translateX(0)}
.sidebar::before{
  content:'';position:absolute;inset:0;
  background:
    radial-gradient(circle at 20% 20%,rgba(144,255,144,.1) 0%,transparent 50%),
    radial-gradient(circle at 80% 80%,rgba(144,255,144,.1) 0%,transparent 50%)
}
.sidebar h2{
  font-family:'Orbitron',monospace;color:#90ff90;margin-bottom:25px;font-size:22px;
  text-transform:uppercase;letter-spacing:2px;text-shadow:0 0 10px rgba(144,255,144,.5);
  border-bottom:2px solid #90ff90;padding-bottom:10px
}

/* ==== Info Cards ==== */
.info-section{
  margin-bottom:25px;padding:20px;
  background:linear-gradient(135deg,rgba(0,100,50,.3),rgba(0,50,20,.5));
  border-radius:12px;border:1px solid rgba(144,255,144,.3);
  box-shadow:0 5px 15px rgba(0,0,0,.3);position:relative
}
.info-section h3{font-family:'Orbitron',monospace;margin:0 0 15px;color:#fff;font-size:14px;text-transform:uppercase;letter-spacing:1px}

.stress-meter{width:100%;height:18px;background:rgba(0,0,0,.5);border-radius:10px;overflow:hidden;margin:10px 0;border:1px solid #0f0;box-shadow:inset 0 0 10px rgba(0,0,0,.5)}
.stress-fill{height:100%;transition:width .8s;border-radius:10px;background:linear-gradient(90deg,#0f0 0%,#ff0 50%,#f00 100%);box-shadow:0 0 10px rgba(255,255,255,.3)}

.plant-legend{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:15px}
.plant-item{display:flex;align-items:center;gap:8px;font-size:12px;color:#fff;background:rgba(0,200,100,.2);padding:8px;border-radius:8px;border:1px solid rgba(0,255,0,.2)}

.dominant-vegetation{display:flex;align-items:center;gap:8px;margin-top:10px;padding:10px;background:rgba(0,255,150,.2);border-radius:8px;border:1px solid rgba(144,255,144,.3)}
.dominant-vegetation .icon{font-size:24px}
.dominant-vegetation .label{font-family:'Orbitron',monospace;font-size:11px;color:#90ff90;text-transform:uppercase;letter-spacing:1px}

/* ==== Legend ==== */
.legend{
  position:absolute;bottom:20px;left:20px;
  background:linear-gradient(135deg,rgba(0,40,20,.95),rgba(0,100,50,.9));
  padding:20px;border-radius:15px;border:1px solid #0f0;
  box-shadow:0 0 20px rgba(0,255,0,.3);z-index:100;backdrop-filter:blur(10px)
}
.legend h4{font-family:'Orbitron',monospace;color:#90ff90;margin:0 0 15px;font-size:14px;text-transform:uppercase;letter-spacing:1px}
.legend-item{display:flex;align-items:center;gap:12px;margin:8px 0;font-size:13px;color:#fff}
.legend-color{width:25px;height:25px;border-radius:50%;border:2px solid rgba(255,255,255,.3);box-shadow:0 0 10px rgba(255,255,255,.2)}

/* ==== Buttons ==== */
.close-btn{
  position:absolute;top:15px;right:15px;background:rgba(0,100,50,.8);
  border:2px solid #0f0;border-radius:50%;font-size:24px;cursor:pointer;color:#90ff90;
  font-family:'Orbitron',monospace;transition:all .3s;z-index:300;width:40px;height:40px;
  display:flex;align-items:center;justify-content:center;box-shadow:0 0 15px rgba(0,255,0,.3)
}
.close-btn:hover{color:#fff;background:rgba(0,200,100,.9);text-shadow:0 0 10px rgba(0,255,0,.8);transform:scale(1.1);box-shadow:0 0 25px rgba(0,255,0,.6)}

/* ==== Predictions ==== */
.prediction{padding:18px;border-radius:10px;margin-top:15px;border:1px solid;position:relative;overflow:hidden}
.prediction::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);animation:scan 3s infinite}
@keyframes scan{0%{left:-100%}100%{left:100%}}
.prediction.positive{background:linear-gradient(135deg,rgba(0,255,0,.2),rgba(0,150,0,.1));border-color:#0f0;box-shadow:0 0 15px rgba(0,255,0,.2)}
.prediction.negative{background:linear-gradient(135deg,rgba(255,0,0,.2),rgba(150,0,0,.1));border-color:#f00;box-shadow:0 0 15px rgba(255,0,0,.2)}

/* ==== Indicators ==== */
.satellite-indicator{position:absolute;top:10px;right:10px;color:#90ff90;font-family:'Orbitron',monospace;font-size:12px;animation:blink 1.5s infinite}
@keyframes blink{0%,50%{opacity:1}51%,100%{opacity:.3}}
.data-stream{position:absolute;bottom:10px;right:10px;font-family:'Orbitron',monospace;font-size:10px;color:#90ff90;opacity:.7}

/* ==== Responsive tweaks ==== */
@media (max-width: 768px){
  .sidebar{ width:80vw; }
  .controls{ top:70px; left:10px; transform:scale(.95); }
  .zoom-controls{ top:70px; right:10px; }
  .legend{ bottom:10px; left:10px; padding:14px; }
}
